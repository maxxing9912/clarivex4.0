<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Clarivex – Discord Bot</title>

  <!-- Tailwind, AOS & ClanLabs UI -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.clanlabs.io/ui/clanlabs-ui.min.css"/>

  <style>
    body.light { background: #f9fafb; color: #1e293b; }
    body.dark  { background: #0f172a; color: #f1f5f9; }

    /* Loader */
    #loader {
      position: fixed; inset: 0;
      display: flex; flex-direction: column;
      align-items: center; justify-content: center;
      background: linear-gradient(135deg,#0f172a,#1e293b);
      color: #38bdf8; z-index: 9999; transition: opacity .5s;
    }
    body.light #loader {
      background: linear-gradient(135deg,#f1f5f9,#e2e8f0);
      color: #4f46e5;
    }
    .spinner {
      width: 100px; height: 100px;
      border: 8px solid rgba(56,189,248,.2);
      border-top-color: #38bdf8;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    #progress { margin-top: .5rem; font: 1.2rem monospace; }

    /* Cookie Banner */
    #cookieBanner {
      position: fixed; bottom: 0; left: 0; right: 0;
      background: rgba(31,41,55,.95); color: #f9fafb;
      padding: .75rem 1rem;
      display: flex; justify-content: space-between; align-items: center;
      transform: translateY(100%); transition: transform .5s; z-index:10000;
    }
    #cookieBanner.show { transform: translateY(0); }

    /* Navbar override */
    .cl-navbar { backdrop-filter: blur(10px); }

    /* Hero gradient */
    .animated-gradient {
      background: linear-gradient(-45deg,#4f46e5,#3b82f6,#06b6d4,#8b5cf6);
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
    }
    @keyframes gradientBG {
      0%   { background-position: 0 50%; }
      50%  { background-position: 100% 50%; }
      100% { background-position: 0 50%; }
    }

    /* Particles */
    .particle {
      position: absolute; border-radius: 50%;
      background: rgba(255,255,255,.15);
      animation: float 8s ease-in-out infinite;
    }
    @keyframes float {
      0%,100% { transform: translate(0,0); }
      50%     { transform: translate(var(--dx),var(--dy)); }
    }

    /* Typewriter */
    .typewriter .wrap {
      border-right: .15em solid currentColor;
      animation: caret .7s steps(1) infinite;
    }
    @keyframes caret { 50% { border-color: transparent; } }

    /* CTA pulse */
    .cta-btn {
      position: relative; overflow: hidden;
      animation: pulseScale 4s ease-in-out infinite;
    }
    .cta-btn::after {
      content: ""; position: absolute; top:50%; left:50%;
      width:0;height:0;background:rgba(255,255,255,.2);
      border-radius:50%;transform:translate(-50%,-50%);
      transition:width .5s,height .5s;
    }
    .cta-btn:hover::after { width:200%; height:200%; }
    @keyframes pulseScale {
      0%,100% { transform: scale(1); }
      50%     { transform: scale(1.05); }
    }

    /* Feature card 3D hover */
    .feature-card {
      perspective: 1000px; transform-style: preserve-3d;
      background: rgba(55,65,81,.6); backdrop-filter: blur(12px);
      padding: 2rem; border-radius: 1.25rem;
      transition: transform .4s, box-shadow .4s; cursor: pointer;
    }
    .feature-card:hover {
      transform: rotateX(6deg) rotateY(6deg) translateY(-10px) scale(1.03);
      box-shadow: 0 20px 25px rgba(0,0,0,.3);
    }
    .feature-card h3 { transition: color .3s; }
    .feature-card:hover h3 { color: #a78bfa; }

    /* Modal backdrop */
    #featureModal .cl-modal-content { max-width: 28rem; }

    /* Confetti canvas */
    #confettiCanvas {
      position: fixed; inset: 0; pointer-events: none;
      opacity: 0; transition: opacity .5s;
    }

    /* Back to top */
    #backToTop {
      position: fixed; bottom:1.5rem; right:1.5rem;
      background:#8b5cf6; color:white; border:none;
      padding:.75rem; border-radius:9999px;
      cursor:pointer; opacity:0; pointer-events:none;
      transition:opacity .3s;
    }
    #backToTop.show { opacity:1; pointer-events:auto; }
  </style>
</head>
<body class="dark font-sans antialiased">

  <!-- Discord Bar -->
  <div id="discordBar" class="fixed top-0 left-0 right-0 bg-gray-900 text-indigo-400 p-2 flex justify-end items-center z-50">
    <span id="discordUserInfo" class="hidden items-center gap-2">
      <img id="discordAvatar" class="w-8 h-8 rounded-full" src="" alt="Avatar" />
      <span id="discordUsernameTag" class="font-medium text-indigo-300"></span>
    </span>
    <a id="discordLoginBtn" href="/auth/discord" class="ml-4 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-1 rounded">Login with Discord</a>
  </div>

  <!-- Loader -->
  <div id="loader">
    <div class="spinner"></div>
    <div id="progress">0%</div>
  </div>

  <!-- Cookie Banner -->
  <div id="cookieBanner">
    <span>We use cookies to improve your experience. By browsing, you accept our policy.</span>
    <button id="acceptCookies" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-1 rounded">Accetta</button>
  </div>

  <!-- ClanLabs Navbar -->
  <nav class="cl-navbar cl-navbar-fixed-top cl-bg-dark cl-text-light">
    <div class="cl-container cl-flex cl-justify-between cl-items-center">
      <a href="#" class="cl-navbar-brand text-2xl font-extrabold">Clarivex</a>
      <ul class="cl-navbar-menu hidden md:flex space-x-6">
        <li><a href="#hero" class="cl-navbar-item">Home</a></li>
        <li><a href="#stats" class="cl-navbar-item">Stats</a></li>
        <li><a href="#features" class="cl-navbar-item">Features</a></li>
        <li><a href="support.html" class="cl-navbar-item">Support</a></li>
      </ul>
      <button class="cl-navbar-burger md:hidden" aria-label="menu">
        <span class="block w-6 h-0.5 bg-indigo-400 mb-1"></span>
        <span class="block w-6 h-0.5 bg-indigo-400 mb-1"></span>
        <span class="block w-6 h-0.5 bg-indigo-400"></span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <div id="content" class="opacity-0 transition-opacity duration-500 pt-20">

    <!-- Hero with video BG -->
    <section id="hero" class="relative h-screen overflow-hidden animated-gradient">
      <video autoplay loop muted class="absolute w-full h-full object-cover">
        <source src="https://cdn.clanlabs.io/videos/hero-bg.mp4" type="video/mp4" />
      </video>
      <div class="relative z-10 flex flex-col items-center justify-center h-full px-6 text-center text-white">
        <h1 class="text-5xl font-extrabold mb-4 typewriter" data-aos="fade-up"><span class="wrap"></span></h1>
        <p class="text-xl mb-8" data-aos="fade-up" data-aos-delay="100">
          The ultimate Discord bot for server management, advanced tools & premium features.
        </p>
        <a href="https://discord.gg/KSnKbWxyqx"
           class="cl-button cl-button-primary cl-button-lg cta-btn"
           data-aos="fade-up" data-aos-delay="200" target="_blank">
          Join our Community
        </a>
      </div>
      <!-- Particles -->
      <div class="particle w-8 h-8" style="--dx:20px;--dy:-30px;left:15%;top:25%;"></div>
      <div class="particle w-6 h-6" style="--dx:-15px;--dy:25px;left:75%;top:35%;animation-delay:2s;"></div>
      <div class="particle w-10 h-10" style="--dx:30px;--dy:40px;left:50%;top:15%;animation-delay:4s;"></div>
    </section>

    <!-- Live Stats -->
    <section id="stats" class="cl-section cl-section--alt py-12" data-aos="fade-up">
      <div class="cl-container grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
        <div class="cl-card">
          <h3 id="onlineCount" class="text-4xl font-bold">--</h3>
          <p>Online Members</p>
        </div>
        <div class="cl-card">
          <h3 id="totalServers" class="text-4xl font-bold">--</h3>
          <p>Servers Joined</p>
        </div>
        <div class="cl-card">
          <h3 id="uptime" class="text-4xl font-bold">--</h3>
          <p>Bot Uptime</p>
        </div>
      </div>
    </section>

    <!-- Features & filter -->
    <section id="features" class="py-20" data-aos="fade-up">
      <div class="cl-container">
        <input id="featureFilter" type="text" placeholder="Cerca feature..." class="cl-input mb-6 w-full" />
        <div id="featuresGrid" class="grid grid-cols-1 md:grid-cols-3 gap-8"></div>
      </div>
    </section>

    <!-- Feature Modal -->
    <div id="featureModal" class="cl-modal">
      <div class="cl-modal-content">
        <button class="cl-modal-close">&times;</button>
        <h3 id="modalTitle" class="text-2xl font-bold mb-4"></h3>
        <p id="modalBody"></p>
      </div>
    </div>

    <!-- CTA + Confetti -->
    <section class="text-center py-16" data-aos="fade-up">
      <a id="ctaBtn"
         href="https://discord.com/oauth2/authorize?client_id=1370487453562962101"
         target="_blank"
         class="cl-button cl-button-secondary cl-button-lg cta-btn">
        Get Started Now
      </a>
      <canvas id="confettiCanvas"></canvas>
    </section>

    <!-- Footer -->
    <footer class="cl-footer cl-bg-dark cl-text-light py-8 text-center">
      <div class="space-x-4 mb-2">
        <a href="tos.html">Terms</a>|
        <a href="privacy.html">Privacy</a>|
        <a href="support.html">Support</a>
      </div>
      <p>&copy; 2025 Clarivex. All rights reserved.</p>
    </footer>

    <!-- Back to top -->
    <button id="backToTop" title="Back to top">↑</button>
  </div>

  <!-- Scripts -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script src="https://cdn.clanlabs.io/ui/clanlabs-ui.min.js"></script>
  <script>
    AOS.init({ once: true, duration: 800, easing: 'ease-in-out' });

    // Loader
    let pct = 0, prog = document.getElementById('progress');
    const li = setInterval(() => {
      pct += 5;
      prog.textContent = pct + '%';
      if (pct >= 100) {
        clearInterval(li);
        document.getElementById('loader').style.opacity = 0;
        setTimeout(() => {
          document.getElementById('loader').style.display = 'none';
          document.getElementById('content').style.opacity = 1;
        }, 500);
      }
    }, 50);

    // Cookie Banner
    const cb = document.getElementById('cookieBanner'),
          ac = document.getElementById('acceptCookies');
    if (!localStorage.getItem('cookiesAccepted')) {
      setTimeout(() => cb.classList.add('show'), 800);
    }
    ac.onclick = () => {
      localStorage.setItem('cookiesAccepted','yes');
      cb.classList.remove('show');
    };

    // Theme Toggle
    document.body.classList.add(localStorage.getItem('theme')==='light'?'light':'dark');
    document.getElementById('darkModeToggle')?.addEventListener('click',()=>{
      document.body.classList.toggle('dark');
      document.body.classList.toggle('light');
      localStorage.setItem('theme',document.body.classList.contains('dark')?'dark':'light');
    });

    // Discord login/user
    window.addEventListener('DOMContentLoaded',()=>{
      fetch('/api/me').then(r=>{
        if(!r.ok)throw '';
        return r.json();
      }).then(u=>{
        const av=document.getElementById('discordAvatar'),
              tg=document.getElementById('discordUsernameTag'),
              ui=document.getElementById('discordUserInfo'),
              btn=document.getElementById('discordLoginBtn');
        let ext=u.avatar?.startsWith('a_')?'gif':'png';
        av.src=u.avatar
          ?`https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.${ext}?size=64`
          :`https://cdn.discordapp.com/embed/avatars/${parseInt(u.discriminator)%5}.png`;
        tg.textContent=`${u.username}#${u.discriminator}`;
        ui.classList.remove('hidden');
        btn.textContent='Logout'; btn.href='/logout';
      }).catch(()=>{
        document.getElementById('discordUserInfo')?.classList.add('hidden');
      });
    });

    // Live stats (mock)
    document.getElementById('onlineCount').textContent  = Math.floor(Math.random()*500)+100;
    document.getElementById('totalServers').textContent = Math.floor(Math.random()*1000)+200;
    document.getElementById('uptime').textContent       = '72h 15m';

    // Typewriter
    (()=>{
      const words=["Advanced Moderation.","XP & Leveling.","Premium Unlocks.","Powerful & Easy."],
            wrap=document.querySelector('.wrap');
      let wi=0,ci=0,del=false;
      (function t(){
        let full=words[wi];
        if(!del){
          wrap.textContent=full.substr(0,++ci);
          if(ci===full.length){del=true;return setTimeout(t,1500);}
        } else {
          wrap.textContent=full.substr(0,--ci);
          if(ci===0){del=false;wi=(wi+1)%words.length;}
        }
        setTimeout(t,del?50:120);
      })();
    })();

    // Features
    const features=[
      {title:'Advanced Moderation',desc:'Smart commands, filters & logs.'},
      {title:'XP & Levels',desc:'Experience, ranks & leaderboards.'},
      {title:'Premium Unlocks',desc:'Redeem keys for exclusive commands.'},
      {title:'Auto-Translate',desc:'Chat translation powered by AI.'},
      {title:'Music Streaming',desc:'Play tunes directly in voice channels.'}
    ];
    const grid=document.getElementById('featuresGrid');
    features.forEach(f=>{
      const c=document.createElement('div');
      c.className='feature-card';
      c.innerHTML=`
        <h3 class="text-2xl font-semibold mb-2">${f.title}</h3>
        <p>${f.desc}</p>
        <button class="learn-btn mt-4 px-3 py-1 bg-indigo-600 text-white rounded">Details</button>
      `;
      c.querySelector('button').onclick=()=>{
        document.getElementById('modalTitle').textContent=f.title;
        document.getElementById('modalBody').textContent=f.desc;
        ClanLabsUI.Modal.open('#featureModal');
      };
      grid.appendChild(c);
    });

    // Filter
    document.getElementById('featureFilter').addEventListener('keyup',e=>{
      const q=e.target.value.toLowerCase();
      grid.childNodes.forEach(n=>{
        n.style.display=n.textContent.toLowerCase().includes(q)?'block':'none';
      });
    });

    // Confetti
    const cvs=document.getElementById('confettiCanvas'),ctx=cvs.getContext('2d');
    function resize(){cvs.width=innerWidth;cvs.height=innerHeight;}
    window.onresize=resize;resize();
    class P{constructor(){
      this.x=Math.random()*cvs.width;this.y=Math.random()*-cvs.height;
      this.r=Math.random()*5+3;this.sp=Math.random()*3+2;
      this.c=`hsl(${Math.random()*360},70%,60%)`;
      this.tilt=Math.random()*10-10;this.ts=Math.random()*.1+.05;
    }
    upd(){this.y+=this.sp;this.x+=Math.sin(this.y/10);this.tilt+=this.ts;
      if(this.y>cvs.height){this.y=-10;this.x=Math.random()*cvs.width;}}
    draw(){ctx.beginPath();ctx.lineWidth=this.r/2;ctx.strokeStyle=this.c;
      ctx.moveTo(this.x+this.tilt+this.r/2,this.y);
      ctx.lineTo(this.x+this.tilt,this.y+this.tilt+this.r/2);ctx.stroke();}
    }
    let parts=[];
    function startConf(){
      parts=[];for(let i=0;i<150;i++)parts.push(new P());
      cvs.style.opacity=1;requestAnimationFrame(run);
      setTimeout(()=>cvs.style.opacity=0,3000);
    }
    function run(){
      ctx.clearRect(0,0,cvs.width,cvs.height);
      parts.forEach(p=>{p.upd();p.draw();});
      if(cvs.style.opacity=='1')requestAnimationFrame(run);
    }
    document.getElementById('ctaBtn').onclick=startConf;

    // Back to top
    const topBtn=document.getElementById('backToTop'),hdr=document.querySelector('nav');
    window.addEventListener('scroll',()=>{
      topBtn.classList.toggle('show',window.scrollY>300);
    });
    topBtn.onclick=()=>window.scrollTo({top:0,behavior:'smooth'});
  </script>
</body>
</html>
